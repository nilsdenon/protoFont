<html>

<head>
    <link rel="stylesheet" href="<%=htmlWebpackPlugin.files.chunks.main.css %>">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
</head>

<body>
    <div class="fontblock">
        <section class="fontblock__body col-8">
            <div class="fontblock__headline">
                <div class="font-primary">
                    <!---<textarea id="primary-font" class="custom-textarea" name="" onchange="autoHeight();" placeholder="Lorem ipsum dolor sit amet" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">Lorem ipsum dolor sit amet</textarea>-->
                    <div id="primary-font" class='font font-primary fake-textarea'>
                            Lorem ipsum dolor sit amet
                    </div>
                </div>
                <span class="hud hud--fontdetails hidden">
                    <dl>
                        <dt>Font Name</dt>
                        <dd>Font Size</dd>
                        <dd>Letter-Spacing</dd>
                        <dd>Line-Height</dd>
                    </dl>
                </span>
            </div>
            <div class="fontblock__bodytext">
                <div class="font-secondary"></div>
                <span class="hud hud--fontdetails hidden">
                    <dl>
                        <dt>Font Name</dt>
                        <dd>Font Size</dd>
                        <dd>Letter-Spacing</dd>
                        <dd>Line-Height</dd>
                    </dl>
                </span>
            </div>
        </section>
        <aside class="fontblock__menu col-4">
            <nav class="fontblock__nav">
                <form class="fontblock__form" action="">
                    <legend>Headline</legend>
                    <div class="form-group">
                        <textarea class="custom-textarea" name="font-primary" onchange="updateText('primary-font', this.value);" placeholder="Lorem ipsum dolor sit amet" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">Lorem ipsum dolor sit amet</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Font-family</label>
                        <select onchange="updateFont('primary-font');" class="form-control" name="primary-font-select" id="primary-font-select">
                        </select>
                    </div>
                  
                    <div class="form-group">
                        <label class="form-label" for="Font-size">Font-size</label>
                        <input onchange="setFontSize('primary-font', this.value);" on id="fontSizePrimary" class="form-control" name="primary-font-size" type="range" value="16" min="6" max="280" step="2" />
                    </div>
                   
                </form>
            </nav>
        </aside>
    </div>
    <script>
        "use strict";
       
        function updateText(el, text) {
           var target = document.getElementById(el);
           target.innerHTML = text;
        }
         // Textarea Auto Height: wir wollen keine hässliche Scrollbalken anzeigen und trotzdem die Möglichkeit haben Text mehrzeilig einzutragen
        //sautoHeight();
        function autoHeight() {
            var ct = document.getElementsByClassName('custom-textarea');
            for (var i = 0; i < ct.length; i++) {
            ct[i].setAttribute('style', 'height:' + (ct[i].scrollHeight) + 'px;');
            ct[i].addEventListener("input", onInput, false);
            }
        }
    
        function onInput() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
        }
        function setFontSize(targetElement, size) {
            var target = document.getElementById(targetElement);
            target.style.fontSize = size + "px";
        }
      
        // Webfonts aus externer JSON Datei auslesen
        var gwf = "https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBcJ0zfjh1BYgpDtpXDmigTl-53aojQ-Wc";

        var request = new XMLHttpRequest();

        request.onload = function() {
            var jsonDoc = request.responseText;
            var jsonObject = JSON.parse(jsonDoc);
            var sel = document.querySelector("#primary-font-select");
            // all items = all webfonts
            var fonts = jsonObject.items;
            
            for(var i=0; i<fonts.length; i++) {
                //console.log(fonts[i]);
                var opt = document.createElement("option");
                var families = fonts[i].family;
                var t = document.createTextNode(families);
                opt.appendChild(t);
                opt.setAttribute("value", families);
                var weights = fonts[i].variants;
                sel.appendChild(opt);
                for(var j=0; j>families.length; j++) {
                    //console.log(families[j]);
                   
                }
              
               // var families = jsonObject.items.family;
            }
         
           // console.log(fonts.length);
        }
        request.open("GET", gwf, true);
        request.setRequestHeader("Accept", "application/json");
        request.send();  

        // Schrift aus dem Select Aktualisieren
        function updateFont(target) {
            var selector = document.querySelector('#primary-font-select');
            var value = selector[selector.selectedIndex].value;
            // String muss in einführungszeichen ausgegeben werden
            var valueInQuotes =  "'" + value + "'";
    
            document.getElementById(target).style.fontFamily = valueInQuotes;
        }

    </script>
    <script src="<%= htmlWebpackPlugin.files.chunks.main.entry %>"></script>

</body>

</html>